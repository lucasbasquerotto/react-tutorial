version: '3.4'

x-logging:
  logging: &logging
    options:
      max-size: 50m

services:

  react:
    image: local/react
    hostname: react
    volumes:
    - ./src:/usr/app/src:rw
    - ./env:/usr/app/env:ro
    - .:/external:rw
    ports:
    - "8080:80"
    - "3000:3000"
    extra_hosts:
    - "host.docker.internal:$DOCKER_HOST_IP"
    logging: *logging
    command: sleep infinity

  react-dynamic:
    image: local/react
    hostname: react
    volumes:
    - .:/usr/app:rw
    ports:
    - "8080:80"
    - "3000:3000"
    extra_hosts:
    - "host.docker.internal:$DOCKER_HOST_IP"
    logging: *logging
    command: sleep infinity
