version: '3.4'

x-logging:
  logging: &logging
    options:
      max-size: 50m

services:
  react:
    image: local/react
    hostname: react
    volumes:
      - ./src:/usr/app/src:rw
      - ./env:/usr/app/env:ro
      - .:/external:rw
    ports:
      - '4000:4000'
    extra_hosts:
      - 'host.docker.internal:$DOCKER_HOST_IP'
    logging: *logging
    command: sleep infinity

  react-dynamic:
    image: local/react
    hostname: react
    volumes:
      - .:/usr/app:rw
    ports:
      - '4000:4000'
    extra_hosts:
      - 'host.docker.internal:$DOCKER_HOST_IP'
    logging: *logging
    command: sleep infinity

  i18n:
    build:
      context: i18n/
    hostname: i18n
    volumes:
      - ./src:/usr/app/src:ro
      - ./lang:/usr/app/lang:rw
    ports:
      - '8080:8080'
    user: node
    logging: *logging
    command: npm run translate
